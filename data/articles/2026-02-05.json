[
  {
    "title": "Git’s Magic Files",
    "link": "https://nesbitt.io/2026/02/05/git-magic-files.html",
    "content": "<p>A follow-up to my post on <a href=\"/2025/11/26/extending-git-functionality.html\">extending git functionality</a>. Git looks for several special files in your repository that control its behavior. These aren’t configuration files in <code class=\"language-plaintext highlighter-rouge\">.git/</code>, they’re committed files that travel with your code and affect how git treats your files.</p>\n\n<p>If you’re building a tool that works with git repositories, like <a href=\"https://github.com/git-pkgs/git-pkgs\">git-pkgs</a>, you’ll want to ensure you respect these configs.</p>\n\n<h3 id=\"gitignore\">.gitignore</h3>\n\n<p>Patterns of files git should never track. One pattern per line, supports wildcards and directory markers.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>node_modules/\n*.log\n.env\ndist/\n</code></pre></div></div>\n\n<p>Git checks multiple ignore files in order: <code class=\"language-plaintext highlighter-rouge\">.gitignore</code> in each directory, <code class=\"language-plaintext highlighter-rouge\">.git/info/exclude</code> for local-only ignores, and the global ignore file at <code class=\"language-plaintext highlighter-rouge\">~/.config/git/ignore</code> or wherever <code class=\"language-plaintext highlighter-rouge\">core.excludesFile</code> points. Global ignores are good for OS-specific files like <code class=\"language-plaintext highlighter-rouge\">.DS_Store</code> or <code class=\"language-plaintext highlighter-rouge\">Thumbs.db</code> that shouldn’t clutter every project’s <code class=\"language-plaintext highlighter-rouge\">.gitignore</code>.</p>\n\n<p>The pattern matching supports wildcards (<code class=\"language-plaintext highlighter-rouge\">*.log</code>), directory markers (<code class=\"language-plaintext highlighter-rouge\">dist/</code>), negation (<code class=\"language-plaintext highlighter-rouge\">!important.log</code>), and character ranges. The <code class=\"language-plaintext highlighter-rouge\">**</code> pattern matches nested directories.</p>\n\n<p>GitHub, GitLab, and Gitea all respect <code class=\"language-plaintext highlighter-rouge\">.gitignore</code> and won’t show ignored files in the web UI. Package managers often ship with their own ignore patterns (<code class=\"language-plaintext highlighter-rouge\">node_modules/</code>, <code class=\"language-plaintext highlighter-rouge\">vendor/</code>, <code class=\"language-plaintext highlighter-rouge\">target/</code>) that you’re expected to add to your ignore file.</p>\n\n<p>See the <a href=\"https://git-scm.com/docs/gitignore\">gitignore docs</a> for the full pattern syntax. GitHub maintains <a href=\"https://github.com/github/gitignore\">a collection of .gitignore templates</a> for different languages and frameworks.</p>\n\n<h3 id=\"gitattributes\">.gitattributes</h3>\n\n<p>Tells git how to handle specific files. This is where you configure filters, diff drivers, merge drivers, line ending normalization, and language detection overrides.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code># Clean/smudge filters\n*.psd filter=lfs diff=lfs merge=lfs\n\n# Line ending normalization\n*.sh text eol=lf\n*.bat text eol=crlf\n\n# Treat as binary\n*.png binary\n\n# Custom diff driver\n*.json diff=json\n\n# Merge strategy\npackage-lock.json merge=ours\n\n# Language detection override for GitHub Linguist\nvendor/* linguist-vendored\n*.gen.go linguist-generated\ndocs/* linguist-documentation\n</code></pre></div></div>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">text</code> attribute tells git to normalize line endings. The <code class=\"language-plaintext highlighter-rouge\">binary</code> attribute tells git not to diff or merge, just pick one version. The <code class=\"language-plaintext highlighter-rouge\">merge=ours</code> strategy always keeps your version during merge conflicts.</p>\n\n<p>GitHub Linguist reads <code class=\"language-plaintext highlighter-rouge\">.gitattributes</code> to override its language detection. Mark vendored code with <code class=\"language-plaintext highlighter-rouge\">linguist-vendored</code> to exclude it from language statistics. Mark generated files with <code class=\"language-plaintext highlighter-rouge\">linguist-generated</code> to collapse them in diffs. Mark documentation with <code class=\"language-plaintext highlighter-rouge\">linguist-documentation</code> to exclude it from stats.</p>\n\n<p>Like <code class=\"language-plaintext highlighter-rouge\">.gitignore</code>, git checks <code class=\"language-plaintext highlighter-rouge\">.gitattributes</code> files in each directory and <code class=\"language-plaintext highlighter-rouge\">.git/info/attributes</code> for local-only attributes.</p>\n\n<p>The <a href=\"https://git-scm.com/docs/gitattributes\">gitattributes docs</a> cover all attributes. The <a href=\"https://github.com/github-linguist/linguist/blob/main/docs/overrides.md\">GitHub Linguist docs</a> list its specific attributes.</p>\n\n<h3 id=\"lfsconfig\">.lfsconfig</h3>\n\n<p>Git LFS configuration that travels with the repository. Uses git config format to set the LFS endpoint URL, transfer settings, and other LFS options.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>[lfs]\n    url = https://lfs.example.com/repo\n[lfs \"transfer\"]\n    maxretries = 3\n</code></pre></div></div>\n\n<p>Git LFS reads <code class=\"language-plaintext highlighter-rouge\">.lfsconfig</code> automatically when you run LFS commands. This lets you commit LFS configuration so everyone working on the repo uses the same settings. Without it, developers need to manually configure their local LFS setup.</p>\n\n<p>LFS also uses <code class=\"language-plaintext highlighter-rouge\">.gitattributes</code> to mark which files should be handled by LFS (the <code class=\"language-plaintext highlighter-rouge\">*.psd filter=lfs diff=lfs merge=lfs</code> pattern shown above). The <code class=\"language-plaintext highlighter-rouge\">.lfsconfig</code> file handles the LFS-specific settings like where to find the LFS server. If you add file patterns to LFS after files are already committed, you need to run <code class=\"language-plaintext highlighter-rouge\">git lfs migrate</code> to rewrite history and move those files into LFS.</p>\n\n<p>See the <a href=\"https://github.com/git-lfs/git-lfs/blob/main/docs/man/git-lfs-config.adoc\">Git LFS config docs</a> for all available options.</p>\n\n<h3 id=\"gitmodules\">.gitmodules</h3>\n\n<p>Configuration for git submodules. Git writes this file when you run <code class=\"language-plaintext highlighter-rouge\">git submodule add</code> and reads it when you run <code class=\"language-plaintext highlighter-rouge\">git submodule update</code>.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>[submodule \"vendor/lib\"]\n    path = vendor/lib\n    url = https://github.com/example/lib.git\n    branch = main\n</code></pre></div></div>\n\n<p>Each submodule gets an entry with its path, URL, and optionally the branch to track. The file lives at the root of your repository.</p>\n\n<p>Submodules let you embed other git repositories as dependencies. Running <code class=\"language-plaintext highlighter-rouge\">git clone</code> doesn’t fetch submodule content automatically, you need <code class=\"language-plaintext highlighter-rouge\">git submodule update --init --recursive</code> or pass <code class=\"language-plaintext highlighter-rouge\">--recurse-submodules</code> to clone.</p>\n\n<p>They don’t handle versioning well (you track a specific commit, not a version range), they create nested <code class=\"language-plaintext highlighter-rouge\">.git</code> directories, and forgetting to update them creates confusing states.</p>\n\n<p>But submodules work fine for vendoring code you control or for monorepo structures where you want to check out only part of the tree.</p>\n\n<p>The <a href=\"https://git-scm.com/docs/git-submodule\">git submodules docs</a> explain the full workflow. The <a href=\"https://git-scm.com/docs/gitmodules\">gitmodules docs</a> cover the file format.</p>\n\n<h3 id=\"mailmap\">.mailmap</h3>\n\n<p>Maps author names and email addresses to canonical identities. Git uses this for <code class=\"language-plaintext highlighter-rouge\">git log</code>, <code class=\"language-plaintext highlighter-rouge\">git shortlog</code>, and <code class=\"language-plaintext highlighter-rouge\">git blame</code> output.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code># Map old email to new email\nJane Developer &lt;jane@company.com&gt; &lt;jane@oldcompany.com&gt;\n\n# Standardize name spelling\nJane Developer &lt;jane@company.com&gt; Jane Dev &lt;jane@company.com&gt;\n\n# Fix both\nJane Developer &lt;jane@company.com&gt; &lt;janed@personal.com&gt;\nJane Developer &lt;jane@company.com&gt; J Developer &lt;janed@personal.com&gt;\n</code></pre></div></div>\n\n<p>The format is <code class=\"language-plaintext highlighter-rouge\">Proper Name &lt;proper@email.com&gt; Commit Name &lt;commit@email.com&gt;</code>. Git looks for entries matching the commit author and rewrites the output.</p>\n\n<p>This matters for contributor statistics. GitHub’s contributor graphs use mailmap. <code class=\"language-plaintext highlighter-rouge\">git shortlog -sn</code> uses it to count commits per author. Tools analyzing commit history use it.</p>\n\n<p>Without mailmap, contributors who changed email addresses or fixed typos in their names show up as multiple people. With it, all their commits aggregate under one identity.</p>\n\n<p>The <a href=\"https://git-scm.com/docs/gitmailmap\">gitmailmap docs</a> cover the file format. You can put mailmap at <code class=\"language-plaintext highlighter-rouge\">.mailmap</code> in the repo root or configure <code class=\"language-plaintext highlighter-rouge\">mailmap.file</code> to point elsewhere.</p>\n\n<h3 id=\"git-blame-ignore-revs\">.git-blame-ignore-revs</h3>\n\n<p>Lists commits that <code class=\"language-plaintext highlighter-rouge\">git blame</code> should skip. Put the commit SHA of bulk formatting changes, linting passes, or other noise commits in this file and blame will look through them to find the meaningful change.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code># .git-blame-ignore-revs\n# Ran prettier on entire codebase\na1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0\n\n# Migrated to ESLint flat config\nb2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1\n</code></pre></div></div>\n\n<p>Configure git to use it with <code class=\"language-plaintext highlighter-rouge\">git config blame.ignoreRevsFile .git-blame-ignore-revs</code>. GitHub, GitLab (15.4+), and Gitea all read this file automatically without configuration.</p>\n\n<p>This solves the problem where running a formatter on the entire codebase makes <code class=\"language-plaintext highlighter-rouge\">git blame</code> useless. With this file, blame skips those commits and shows the actual author of the logic.</p>\n\n<p>The file format is simple: one commit SHA per line, with <code class=\"language-plaintext highlighter-rouge\">#</code> for comments. See the <a href=\"https://git-scm.com/docs/git-blame#Documentation/git-blame.txt---ignore-revs-fileltfilegt\">git blame docs</a> for details.</p>\n\n<h3 id=\"gitmessage\">.gitmessage</h3>\n\n<p>A template for commit messages. You configure this with <code class=\"language-plaintext highlighter-rouge\">git config commit.template .gitmessage</code> and git will pre-fill the commit message editor with this content.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code># .gitmessage\n# &lt;type&gt;: &lt;subject&gt;\n#\n# &lt;body&gt;\n#\n# &lt;footer&gt;\n#\n# Types: feat, fix, docs, style, refactor, test, chore\n</code></pre></div></div>\n\n<p>Unlike the other files in this post, <code class=\"language-plaintext highlighter-rouge\">.gitmessage</code> requires manual configuration per clone. Each developer needs to run <code class=\"language-plaintext highlighter-rouge\">git config commit.template .gitmessage</code> after cloning. Some teams automate this with a setup script or use tools like <a href=\"https://github.com/typicode/husky\">husky</a> to set local configs during installation. This extra step is why most projects prefer <code class=\"language-plaintext highlighter-rouge\">commit-msg</code> hooks to validate format rather than templates to guide writing.</p>\n\n<p>The <a href=\"https://git-scm.com/docs/git-commit#_discussion\">git commit docs</a> mention template files. The <code class=\"language-plaintext highlighter-rouge\">prepare-commit-msg</code> hook is an alternative that can generate dynamic templates.</p>\n\n<h2 id=\"forge-specific-folders\">Forge-Specific Folders</h2>\n\n<p>Git forges extend repositories with their own magic folders: <code class=\"language-plaintext highlighter-rouge\">.github/</code>, <code class=\"language-plaintext highlighter-rouge\">.gitlab/</code>, <code class=\"language-plaintext highlighter-rouge\">.gitea/</code>, <code class=\"language-plaintext highlighter-rouge\">.forgejo/</code>, <code class=\"language-plaintext highlighter-rouge\">.bitbucket/</code>. These aren’t git features, but they follow the same pattern: configuration that travels with your code.</p>\n\n<p>Inside these folders you’ll find CI/CD workflows, issue and PR templates, CODEOWNERS files mapping paths to required reviewers, and other forge-specific configuration. The folders let forges add features without polluting the repository root.</p>\n\n<p>Forgejo and Gitea have fallback chains. Forgejo checks <code class=\"language-plaintext highlighter-rouge\">.forgejo/</code> → <code class=\"language-plaintext highlighter-rouge\">.gitea/</code> → <code class=\"language-plaintext highlighter-rouge\">.github/</code>. Gitea checks <code class=\"language-plaintext highlighter-rouge\">.gitea/</code> → <code class=\"language-plaintext highlighter-rouge\">.github/</code>. This lets you override GitHub-specific config when hosting on multiple platforms.</p>\n\n<p>SourceHut uses <code class=\"language-plaintext highlighter-rouge\">.build.yml</code> at the root or <code class=\"language-plaintext highlighter-rouge\">.builds/*.yml</code> for CI, without a dedicated folder namespace.</p>\n\n<h2 id=\"other-conventions\">Other Conventions</h2>\n\n<p><strong>.gitkeep</strong> is a convention, not a git feature. Git doesn’t track empty directories. If you want an empty directory in your repository, you put a <code class=\"language-plaintext highlighter-rouge\">.gitkeep</code> file in it so git has something to track. The filename <code class=\"language-plaintext highlighter-rouge\">.gitkeep</code> is arbitrary, it could be anything.</p>\n\n<p><strong>.gitconfig</strong> files sometimes appear in repositories as suggested configuration. Git won’t load these automatically (security reasons), but projects include them with instructions to run <code class=\"language-plaintext highlighter-rouge\">git config include.path ../.gitconfig</code> or manually copy settings. Common in monorepos or projects with specific git settings they want to standardize.</p>\n\n<p><strong>.gitsigners</strong> or similar files track GPG/SSH signing keys for trusted contributors. Not a native git feature, but used by some projects (notably the Linux kernel) as part of their signing workflow. Git’s <code class=\"language-plaintext highlighter-rouge\">gpg.ssh.allowedSignersFile</code> config can point to a file of trusted SSH keys that <code class=\"language-plaintext highlighter-rouge\">git log --show-signature</code> uses for verification.</p>\n\n<p><strong>.gitreview</strong> configures <a href=\"https://www.gerritcodereview.com/\">Gerrit</a> code review integration. Used by projects hosted on Gerrit (OpenStack, Android, Eclipse) to specify which Gerrit server and project to push to.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>[gerrit]\nhost=review.opendev.org\nport=29418\nproject=openstack/nova.git\ndefaultbranch=master\n</code></pre></div></div>\n\n<p>Running <a href=\"https://docs.opendev.org/opendev/git-review/latest/\"><code class=\"language-plaintext highlighter-rouge\">git review</code></a> reads this file and pushes commits to Gerrit for review instead of directly to the branch. It’s a canonical example of a tool extending git’s workflow through a committed config file.</p>\n\n<p><strong>.gitlint</strong> configures <a href=\"https://jorisroovers.com/gitlint/\">gitlint</a> for commit message linting. Follows the same pattern: commit the config, everyone gets the same rules.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>[general]\nignore=body-is-missing\n\n[title-max-length]\nline-length=72\n</code></pre></div></div>\n\n<p>Gitlint reads this to validate commit message format. Similar to using a <code class=\"language-plaintext highlighter-rouge\">commit-msg</code> hook but with the configuration traveling with the repository.</p>\n\n<p><strong>.jj/</strong> is <a href=\"https://github.com/jj-vcs/jj\">Jujutsu</a>’s working copy state directory. Jujutsu is a git-compatible VCS that stores its own metadata in <code class=\"language-plaintext highlighter-rouge\">.jj/</code> while respecting all of git’s magic files. If you use <code class=\"language-plaintext highlighter-rouge\">jj</code>, you’ll have both <code class=\"language-plaintext highlighter-rouge\">.git/</code> and <code class=\"language-plaintext highlighter-rouge\">.jj/</code> in your repository, and <code class=\"language-plaintext highlighter-rouge\">.gitignore</code>, <code class=\"language-plaintext highlighter-rouge\">.gitattributes</code>, <code class=\"language-plaintext highlighter-rouge\">.mailmap</code> all work the same way.</p>\n\n<h2 id=\"beyond-git\">Beyond Git</h2>\n\n<p>The pattern extends beyond git. Other tools follow the same approach: drop a dotfile in your repository, tools detect it automatically, behavior changes.</p>\n\n<p><strong>.editorconfig</strong> standardizes editor behavior across teams. Put it at the root of your repo and editors read it to configure indent style, line endings, trailing whitespace, and character encoding.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>root = true\n\n[*]\nindent_style = space\nindent_size = 2\nend_of_line = lf\ncharset = utf-8\ntrim_trailing_whitespace = true\n\n[*.md]\ntrim_trailing_whitespace = false\n</code></pre></div></div>\n\n<p>VS Code, Vim, Emacs, Sublime, and most other editors either support it natively or have plugins. See <a href=\"https://editorconfig.org/\">editorconfig.org</a> for the full spec.</p>\n\n<p><strong>.ruby-version</strong>, <strong>.node-version</strong>, <strong>.python-version</strong> tell version managers which language version to use. Tools like rbenv, nodenv, pyenv, nvm, and asdf read these files when you <code class=\"language-plaintext highlighter-rouge\">cd</code> into the directory and automatically switch versions.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code># .ruby-version\n3.3.0\n\n# .node-version\n20.11.0\n</code></pre></div></div>\n\n<p><strong>.tool-versions</strong> is asdf’s multi-language version file. One file for all languages.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>ruby 3.3.0\nnodejs 20.11.0\npython 3.12.0\n</code></pre></div></div>\n\n<p><strong>.dockerignore</strong> works like <code class=\"language-plaintext highlighter-rouge\">.gitignore</code> but for Docker build context. When you run <code class=\"language-plaintext highlighter-rouge\">docker build</code>, Docker sends files to the daemon. List patterns in <code class=\"language-plaintext highlighter-rouge\">.dockerignore</code> and Docker won’t send them.</p>\n\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>.git\nnode_modules\n*.log\n.env\n</code></pre></div></div>\n\n<p>This speeds up builds and keeps secrets out of images. The syntax matches <code class=\"language-plaintext highlighter-rouge\">.gitignore</code>: wildcards, negation, directory markers.</p>\n\n<h2 id=\"supporting-these-files\">Supporting These Files</h2>\n\n<p>If you’re building tools that interact with git repositories, you probably want to respect these files:</p>\n\n<ul>\n  <li>Read <code class=\"language-plaintext highlighter-rouge\">.gitignore</code> when walking the repository tree</li>\n  <li>Read <code class=\"language-plaintext highlighter-rouge\">.gitattributes</code> to know which files are binary, vendored, or generated</li>\n  <li>Read <code class=\"language-plaintext highlighter-rouge\">.mailmap</code> when displaying author information</li>\n  <li>Read <code class=\"language-plaintext highlighter-rouge\">.gitmodules</code> if you need to handle submodules</li>\n</ul>\n\n<p>The git config format (used by <code class=\"language-plaintext highlighter-rouge\">.gitmodules</code> and various other files) is <code class=\"language-plaintext highlighter-rouge\">[section \"subsection\"] key = value</code>. Git ships a <code class=\"language-plaintext highlighter-rouge\">git config</code> command that reads and writes these files correctly. Most languages have git config parsers in their git libraries.</p>\n\n<hr />\n\n<p>If you know of other git magic files or have corrections, reach out on <a href=\"https://mastodon.social/@andrewnez\">Mastodon</a> or submit a pull request on <a href=\"https://github.com/andrew/nesbitt.io\">GitHub</a>.</p>",
    "description": "Magic files and where to find them: .gitignore, .gitattributes, .mailmap, .git-blame-ignore-revs, .lfsconfig, and more.",
    "is_fulltext": true,
    "source": "Andrew Nesbitt",
    "pub_date": "2026-02-05T10:00:00+00:00",
    "fetched_at": "2026-02-05T16:44:56.323800",
    "url_hash": "7924f799c40f7934ec77a17a65f37b42"
  }
]